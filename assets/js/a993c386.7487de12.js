"use strict";(self.webpackChunkdocsite_poc_github_io=self.webpackChunkdocsite_poc_github_io||[]).push([[38521],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=d(n),m=i,p=h["".concat(l,".").concat(m)]||h[m]||u[m]||r;return n?a.createElement(p,o(o({ref:t},c),{},{components:n})):a.createElement(p,o({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var d=2;d<r;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},60484:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var a=n(87462),i=(n(67294),n(3905));const r={title:"Structuring your data with schemas",date:"2020-02-13",sidebar_position:10},o=void 0,s={unversionedId:"understanding-tracking-design/understanding-schemas-and-validation/index",id:"understanding-tracking-design/understanding-schemas-and-validation/index",title:"Structuring your data with schemas",description:"One of the most powerful features of Snowplow is schemas.",source:"@site/docs/understanding-tracking-design/understanding-schemas-and-validation/index.md",sourceDirName:"understanding-tracking-design/understanding-schemas-and-validation",slug:"/understanding-tracking-design/understanding-schemas-and-validation/",permalink:"/docs/understanding-tracking-design/understanding-schemas-and-validation/",draft:!1,editUrl:"https://github.com/snowplow/snowplow.github.io/tree/main/docs/understanding-tracking-design/understanding-schemas-and-validation/index.md",tags:[],version:"current",lastUpdatedAt:1662725915,formattedLastUpdatedAt:"Sep 9, 2022",sidebarPosition:10,frontMatter:{title:"Structuring your data with schemas",date:"2020-02-13",sidebar_position:10},sidebar:"defaultSidebar",previous:{title:"Introduction to tracking design",permalink:"/docs/understanding-tracking-design/introduction-to-tracking-design/"},next:{title:"Understanding events and entities",permalink:"/docs/understanding-tracking-design/understanding-events-entities/"}},l={},d=[{value:"Managing data quality with data structures",id:"managing-data-quality-with-data-structures",level:2},{value:"Building data meaning with data structures",id:"building-data-meaning-with-data-structures",level:2},{value:"The anatomy of a schema",id:"the-anatomy-of-a-schema",level:2}],c={toc:d};function u(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"One of the most powerful features of Snowplow is schemas."),(0,i.kt)("p",null,"Schemas define the structure of the data that you collect. Each schema defines what fields are recorded with each event that is captured, and provides validation criteria for each field. Schemas are also used to describe the structure of ",(0,i.kt)("a",{parentName:"p",href:"/docs/understanding-tracking-design/understanding-events-entities/"},"entities that are attached to events"),"."),(0,i.kt)("p",null,"Schemas make it possible for you to:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"define your own data structures to capture data in a way that works for your business; for example a two-sided marketplace will be tracking very different events than a gaming application"),(0,i.kt)("li",{parentName:"ol"},"ensure your data presents a clear and easy-to-understand record of what has happened"),(0,i.kt)("li",{parentName:"ol"},"evolve your event and entity definitions over time by updating those schemas, enabling you to\xa0",(0,i.kt)("a",{parentName:"li",href:"https://snowplowanalytics.com/blog/2019/07/23/how-to-ensure-your-data-collection-evolves-alongside-your-business/"},"evolve their data collection with their business"),". Schemas can be updated to reflect changes to the design of websites, mobile apps and server-side applications"),(0,i.kt)("li",{parentName:"ol"},"expand your tracking to include more data as your organisation becomes more data sophisticated and needs to collect more granular data")),(0,i.kt)("h2",{id:"managing-data-quality-with-data-structures"},"Managing data quality with data structures"),(0,i.kt)("p",null,"Schemas describe how you want your data to be structured. When data is ",(0,i.kt)("a",{parentName:"p",href:"/docs/understanding-your-pipeline/architecture-overview-aws/"},"processed through your Snowplow pipeline"),", each event is validated against its self-describing schema and only those that pass are allowed to pass through, ",(0,i.kt)("a",{parentName:"p",href:"/docs/managing-data-quality/failed-events/understanding-failed-events/"},"failures are sent to a separate queue"),"."),(0,i.kt)("p",null,"Through describing how the data should be structured as part of your schema definition you ensure clean and consistent data landing in your data warehouse or other destinations."),(0,i.kt)("h2",{id:"building-data-meaning-with-data-structures"},"Building data meaning with data structures"),(0,i.kt)("p",null,"Rather than just leaving your data open to interpretation by the many different people that will consume and analyse it, you can use schemas to describe the meaning of your data. Each schema you define should clearly describe what is being collected and why both for the schema itself, but also for each field within the schema."),(0,i.kt)("h2",{id:"the-anatomy-of-a-schema"},"The anatomy of a schema"),(0,i.kt)("p",null,"Let\u2019s take a look at an example JSON schema to talk about its constituent parts:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  "$schema": "http://iglucentral.com/schemas/com.snowplowanalytics.self-desc/schema/jsonschema/1-0-0#",\n  "description": "Schema for an example event",\n  "self": {\n    "vendor": "com.snowplowanalytics",\n    "name": "example_event",\n    "format": "jsonschema",\n    "version": "1-0-0"\n  },\n  "type": "object",\n  "properties": {\n    "name": {\n      "type": "string",\n      "maxLength": 128\n    },\n    "job_role": {\n      "description": \n      "type": [\n        "string",\n        "null"\n      ],\n      "maxLength": 128\n    },\n    "promo_code": {\n      "type": [\n        "string",\n        "null"\n      ],\n      "minLength": 8,\n      "maxLength": 20,\n    }\n  },\n  "additionalProperties": false,\n  "required": [\n    "name"\n  ]\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u201c$schema\u201d"),"\xa0- this argument instructs the Snowplow pipeline on how to handle this schema and in most circumstances should be left as shown in the example."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u201cdescription\u201d"),"\xa0- This argument is where you should put detailed information on the purpose of this schema. This will be particularly helpful for others who are trying to understand the meaning of particular data or when they want to know if a schema already exists for something they want to track."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u201cself\u201d"),"\xa0- This section of arguments contains metadata which makes the schema \u201cself-describing\u201d."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u201cvendor\u201d"),"\xa0- This usually refers to the company who has authored the schema. Most times this will be your company\u2019s name. This could also be for organizing schemas from different groups in your organization if you have multiple teams working on different events and contexts (e.g. com.acme.android, com.acme.marketing). Snowplow uses the reversed company internet domain for vendor names (e.g. com.snowplowanalytics)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u201cname\u201d"),"\xa0- This is the name you want to give your schema. Much like the description above, this is a good chance to help others like data analysts who might be consuming this data know exactly what your schema is meant to capture."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u201cformat\u201d"),"\xa0- This field simply states the format of the schema which will always be\xa0",(0,i.kt)("inlineCode",{parentName:"li"},"jsonschema"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u201cversion\u201d"),"\xa0- Snowplow allows you to ",(0,i.kt)("a",{parentName:"li",href:"/docs/understanding-tracking-design/versioning-your-data-structures/"},"increment versions of a schema")," as your tracking needs evolve and this argument stores the current version.")),(0,i.kt)("p",null,"After the self section the remainder of the schema is where you will begin describing the event or context fields that you will be collecting."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u201ctype\u201d"),"\xa0- Type should always be set as\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"object"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u201cproperties\u201d"),"\xa0- Here is where you will describe the fields you intend on collecting. Each field is given a name and a number of arguments, these are important as they feed directly into the validation process."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u201cdescription\u201d"),"\xa0- Similar to the description field for the schema, this argument is where you should put detailed information on what this field represents to avoid any misunderstanding or misinterpretation during analysis."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},'"type"')," - This denotes the type of data that is collected through this field. The most common types of data collected are ",(0,i.kt)("inlineCode",{parentName:"li"},"string"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"number"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"integer"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"object"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"array"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"boolean")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"null"),". A single field can allow multiple types as shown in the field ",(0,i.kt)("inlineCode",{parentName:"li"},"job title")," in the example schema which allows both ",(0,i.kt)("inlineCode",{parentName:"li"},"string")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"null")),(0,i.kt)("li",{parentName:"ul"},"Validation arguments can then be passed into the field such as ",(0,i.kt)("inlineCode",{parentName:"li"},"minLength"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"maxLength")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"enum")," for strings and ",(0,i.kt)("inlineCode",{parentName:"li"},"minimum")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"maximum")," for integers. A full set of valid arguments can be found on the ",(0,i.kt)("a",{parentName:"li",href:"https://json-schema.org/draft/2019-09/json-schema-validation.html#rfc.section.6"},"JSON schema specification"),".")))}u.isMDXComponent=!0}}]);