"use strict";(self.webpackChunkdocsite_poc_github_io=self.webpackChunkdocsite_poc_github_io||[]).push([[23754],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=i.createContext({}),c=function(e){var n=i.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=c(e.components);return i.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},p=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(t),m=a,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||o;return t?i.createElement(f,r(r({ref:n},u),{},{components:t})):i.createElement(f,r({ref:n},u))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=p;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var c=2;c<o;c++)r[c]=t[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}p.displayName="MDXCreateElement"},85162:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(67294),a=t(86010);const o="tabItem_Ymn6";function r(e){let{children:n,hidden:t,className:r}=e;return i.createElement("div",{role:"tabpanel",className:(0,a.Z)(o,r),hidden:t},n)}},65488:(e,n,t)=>{t.d(n,{Z:()=>m});var i=t(87462),a=t(67294),o=t(86010),r=t(72389),s=t(67392),l=t(7094),c=t(12466);const u="tabList__CuJ",d="tabItem_LNqP";function p(e){var n,t;const{lazy:r,block:p,defaultValue:m,values:f,groupId:g,className:k}=e,y=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=f?f:y.map((e=>{let{props:{value:n,label:t,attributes:i}}=e;return{value:n,label:t,attributes:i}})),h=(0,s.l)(b,((e,n)=>e.value===n.value));if(h.length>0)throw new Error('Docusaurus error: Duplicate values "'+h.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const v=null===m?m:null!=(n=null!=m?m:null==(t=y.find((e=>e.props.default)))?void 0:t.props.value)?n:y[0].props.value;if(null!==v&&!b.some((e=>e.value===v)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+v+'" but none of its children has the corresponding value. Available values are: '+b.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:w,setTabGroupChoices:T}=(0,l.U)(),[x,N]=(0,a.useState)(v),C=[],{blockElementScrollPositionUntilNextRender:I}=(0,c.o5)();if(null!=g){const e=w[g];null!=e&&e!==x&&b.some((n=>n.value===e))&&N(e)}const S=e=>{const n=e.currentTarget,t=C.indexOf(n),i=b[t].value;i!==x&&(I(n),N(i),null!=g&&T(g,String(i)))},O=e=>{var n;let t=null;switch(e.key){case"ArrowRight":{var i;const n=C.indexOf(e.currentTarget)+1;t=null!=(i=C[n])?i:C[0];break}case"ArrowLeft":{var a;const n=C.indexOf(e.currentTarget)-1;t=null!=(a=C[n])?a:C[C.length-1];break}}null==(n=t)||n.focus()};return a.createElement("div",{className:(0,o.Z)("tabs-container",u)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":p},k)},b.map((e=>{let{value:n,label:t,attributes:r}=e;return a.createElement("li",(0,i.Z)({role:"tab",tabIndex:x===n?0:-1,"aria-selected":x===n,key:n,ref:e=>C.push(e),onKeyDown:O,onFocus:S,onClick:S},r,{className:(0,o.Z)("tabs__item",d,null==r?void 0:r.className,{"tabs__item--active":x===n})}),null!=t?t:n)}))),r?(0,a.cloneElement)(y.filter((e=>e.props.value===x))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},y.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==x})))))}function m(e){const n=(0,r.Z)();return a.createElement(p,(0,i.Z)({key:String(n)},e))}},4452:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var i=t(87462),a=(t(67294),t(3905)),o=t(65488),r=t(85162);const s={title:"Anonymous Tracking",date:"2022-08-30",sidebar_position:60},l="Anonymous Tracking",c={unversionedId:"collecting-data/collecting-from-own-applications/mobile-trackers/anonymous-tracking/index",id:"collecting-data/collecting-from-own-applications/mobile-trackers/anonymous-tracking/index",title:"Anonymous Tracking",description:"This feature is available since v4.",source:"@site/docs/collecting-data/collecting-from-own-applications/mobile-trackers/anonymous-tracking/index.md",sourceDirName:"collecting-data/collecting-from-own-applications/mobile-trackers/anonymous-tracking",slug:"/collecting-data/collecting-from-own-applications/mobile-trackers/anonymous-tracking/",permalink:"/docs/collecting-data/collecting-from-own-applications/mobile-trackers/anonymous-tracking/",draft:!1,editUrl:"https://github.com/snowplow/snowplow.github.io/tree/main/docs/collecting-data/collecting-from-own-applications/mobile-trackers/anonymous-tracking/index.md",tags:[],version:"current",lastUpdatedAt:1662725915,formattedLastUpdatedAt:"Sep 9, 2022",sidebarPosition:60,frontMatter:{title:"Anonymous Tracking",date:"2022-08-30",sidebar_position:60},sidebar:"defaultSidebar",previous:{title:"Set up the remote configuration",permalink:"/docs/collecting-data/collecting-from-own-applications/mobile-trackers/remote-configuration/"},next:{title:"Hybrid Apps",permalink:"/docs/collecting-data/collecting-from-own-applications/mobile-trackers/hybrid-apps/"}},u={},d=[{value:"1. Full client-side anonymisation",id:"1-full-client-side-anonymisation",level:2},{value:"2. Client-side anonymisation with session tracking",id:"2-client-side-anonymisation-with-session-tracking",level:2},{value:"3. Server-side anonymisation",id:"3-server-side-anonymisation",level:2}],p={toc:d};function m(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,i.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"anonymous-tracking"},"Anonymous Tracking"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"This feature is available since v4.")),(0,a.kt)("p",null,"Anonymous tracking is a tracker feature that enables anonymising various user and session identifiers to support user privacy in case consent for tracking the identifiers is not given."),(0,a.kt)("p",null,"The affected user and session identifiers are stored in two context entities: ",(0,a.kt)("a",{parentName:"p",href:"/docs/collecting-data/collecting-from-own-applications/mobile-trackers/tracking-events/#session"},"Session")," and ",(0,a.kt)("a",{parentName:"p",href:"/docs/collecting-data/collecting-from-own-applications/mobile-trackers/tracking-events/#platform"},"Platform context"),". The Session context entity contains user and session identifiers, while the Platform context entity contains user identifiers. Concretely, the following user and session identifiers can be anonymised:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Client-side user identifiers: the ",(0,a.kt)("inlineCode",{parentName:"li"},"userId")," in Session context entity and the IDFA identifiers (",(0,a.kt)("inlineCode",{parentName:"li"},"appleIdfa"),", and ",(0,a.kt)("inlineCode",{parentName:"li"},"appleIdfv"),") in the Platform context entity."),(0,a.kt)("li",{parentName:"ol"},"Client-side session identifiers: ",(0,a.kt)("inlineCode",{parentName:"li"},"sessionId")," in Session context."),(0,a.kt)("li",{parentName:"ol"},"Server-side user identifiers: ",(0,a.kt)("inlineCode",{parentName:"li"},"network_userid")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"user_ipaddress")," event properties.")),(0,a.kt)("p",null,"There are several levels to the anonymisation depending on which of the three categories are affected:"),(0,a.kt)("h2",{id:"1-full-client-side-anonymisation"},"1. Full client-side anonymisation"),(0,a.kt)("p",null,"In this case, we want to anonymise both the client-side user identifiers as well as the client-side session identifiers. This means disabling the Session context altogether and enabling user anonymisation:"),(0,a.kt)(o.Z,{groupId:"platform",mdxType:"Tabs"},(0,a.kt)(r.Z,{value:"ios",label:"iOS",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-swift"},"let config = TrackerConfiguration()\n    .sessionContext(false) // Session context entity won't be added to events\n    .userAnonymisation(true) // User identifiers in Platform context (IDFA and IDFV) will be anonymised\n"))),(0,a.kt)(r.Z,{value:"android",label:"Android",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"TrackerConfiguration config = new TrackerConfiguration()\n    .sessionContext(false) // Session context entity won't be added to events\n    .userAnonymisation(true); // User identifiers in Platform context (IDFA and IDFV) will be anonymised\n});\n")))),(0,a.kt)("h2",{id:"2-client-side-anonymisation-with-session-tracking"},"2. Client-side anonymisation with session tracking"),(0,a.kt)("p",null,"This setting disables client-side user identifiers are but tracks session information. In practice, this means that events track the Session context entity but the ",(0,a.kt)("inlineCode",{parentName:"p"},"userId")," property is a null UUID (",(0,a.kt)("inlineCode",{parentName:"p"},"00000000-0000-0000-0000-000000000000"),"). In case Platform context is enabled, the IDFA identifiers will not be present."),(0,a.kt)(o.Z,{groupId:"platform",mdxType:"Tabs"},(0,a.kt)(r.Z,{value:"ios",label:"iOS",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-swift"},"let config = TrackerConfiguration()\n    .sessionContext(true) // Session context is tracked with the session ID\n    .userAnonymisation(true) // User identifiers in Session and Platform context are anonymised\n"))),(0,a.kt)(r.Z,{value:"android",label:"Android",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"TrackerConfiguration config = new TrackerConfiguration()\n    .sessionContext(true) // Session context is tracked with the session ID\n    .userAnonymisation(true); // User identifiers in Session and Platform context are anonymised\n")))),(0,a.kt)("h2",{id:"3-server-side-anonymisation"},"3. Server-side anonymisation"),(0,a.kt)("p",null,"Server-side anonymisation affects user identifiers set server-side. In particular, these are the ",(0,a.kt)("inlineCode",{parentName:"p"},"network_userid")," property set in server-side cookie and the user IP address. You can anonymise the properties using the ",(0,a.kt)("inlineCode",{parentName:"p"},"serverAnonymisation")," flag in ",(0,a.kt)("inlineCode",{parentName:"p"},"EmitterConfiguration"),":"),(0,a.kt)(o.Z,{groupId:"platform",mdxType:"Tabs"},(0,a.kt)(r.Z,{value:"ios",label:"iOS",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-swift"},"let config = EmitterConfiguration()\n    .serverAnonymisation(true)\n"))),(0,a.kt)(r.Z,{value:"android",label:"Android",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"EmitterConfiguration config = new EmitterConfiguration()\n    .serverAnonymisation(true);\n")))),(0,a.kt)("p",null,"Setting the flag will add a ",(0,a.kt)("inlineCode",{parentName:"p"},"SP-Anonymous")," HTTP header to requests sent to the Snowplow collector. The Snowplow pipeline will take care of anonymising the identifiers."))}m.isMDXComponent=!0}}]);