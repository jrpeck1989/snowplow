"use strict";(self.webpackChunkdocsite_poc_github_io=self.webpackChunkdocsite_poc_github_io||[]).push([[39425],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>h});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),g=d(t),h=r,k=g["".concat(l,".").concat(h)]||g[h]||u[h]||i;return t?a.createElement(k,o(o({ref:n},c),{},{components:t})):a.createElement(k,o({ref:n},c))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=g;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},18548:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=t(87462),r=(t(67294),t(3905));const i={title:"Versioning your data structures",date:"2020-02-25",sidebar_position:90},o=void 0,s={unversionedId:"understanding-tracking-design/versioning-your-data-structures/index",id:"understanding-tracking-design/versioning-your-data-structures/index",title:"Versioning your data structures",description:"Snowplow is designed to make it easy for you to change your tracking design in a safe and backwards-compatible way as your organisational data needs evolve.",source:"@site/docs/understanding-tracking-design/versioning-your-data-structures/index.md",sourceDirName:"understanding-tracking-design/versioning-your-data-structures",slug:"/understanding-tracking-design/versioning-your-data-structures/",permalink:"/docs/understanding-tracking-design/versioning-your-data-structures/",draft:!1,editUrl:"https://github.com/snowplow/snowplow.github.io/tree/main/docs/understanding-tracking-design/versioning-your-data-structures/index.md",tags:[],version:"current",lastUpdatedAt:1662725915,formattedLastUpdatedAt:"Sep 9, 2022",sidebarPosition:90,frontMatter:{title:"Versioning your data structures",date:"2020-02-25",sidebar_position:90},sidebar:"defaultSidebar",previous:{title:"Managing data structures in the console",permalink:"/docs/understanding-tracking-design/managing-data-structures/"},next:{title:"Collecting data with Trackers and Webhooks",permalink:"/docs/collecting-data/"}},l={},d=[{value:"Why is versioning important?",id:"why-is-versioning-important",level:2},{value:"How do I version?",id:"how-do-i-version",level:2},{value:"Breaking and non-breaking changes",id:"breaking-and-non-breaking-changes",level:3},{value:"Should I choose breaking or non-breaking?",id:"should-i-choose-breaking-or-non-breaking",level:3},{value:"Overwriting schemas",id:"overwriting-schemas",level:3},{value:"Incrementing the middle digit",id:"incrementing-the-middle-digit",level:3}],c={toc:d};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Snowplow is designed to make it easy for you to change your tracking design in a safe and backwards-compatible way as your organisational data needs evolve."),(0,r.kt)("p",null,"Data structures are used to describe the structure your data should be delivered in. The structure itself is described by a ",(0,r.kt)("a",{parentName:"p",href:"/docs/understanding-tracking-design/understanding-schemas-and-validation/"},"JSON schemas"),". Each schema carries a version number expressed as three numeric digits. As your schema evolves, all previous versions of that schema remain available to ensure backwards-compatibility."),(0,r.kt)("h2",{id:"why-is-versioning-important"},"Why is versioning important?"),(0,r.kt)("p",null,"As well as good practice, versioning has an important role in telling Snowplow Loaders how to handle the changes when loading into your data warehouse(s)."),(0,r.kt)("p",null,"For example, for certain changes there will be a need to create new columns, update columns or even create whole new tables. For this reason, it's important you understand when your change is breaking and version correctly."),(0,r.kt)("h2",{id:"how-do-i-version"},"How do I version?"),(0,r.kt)("h3",{id:"breaking-and-non-breaking-changes"},"Breaking and non-breaking changes"),(0,r.kt)("p",null,"In Data Structures UI at the point of publishing a schema you'll be asked to select which version you'd like to create. There are two options:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Non-breaking")," - a non-breaking change is backward compatible with historical data and increments the ",(0,r.kt)("inlineCode",{parentName:"li"},"patch")," number i.e.\xa0",(0,r.kt)("inlineCode",{parentName:"li"},"1-0-0"),"\xa0->\xa0",(0,r.kt)("inlineCode",{parentName:"li"},"1-0-1"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Breaking")," - a breaking change is not backwards compatible with historical data and increments the ",(0,r.kt)("inlineCode",{parentName:"li"},"model")," number i.e.\xa0",(0,r.kt)("inlineCode",{parentName:"li"},"1-0-0"),"\xa0->\xa0",(0,r.kt)("inlineCode",{parentName:"li"},"2-0-0"),".")),(0,r.kt)("h3",{id:"should-i-choose-breaking-or-non-breaking"},"Should I choose breaking or non-breaking?"),(0,r.kt)("p",null,"Different data warehouses handle schema evolution slightly differently. Use the table below as a guide to how to handle versioning in Data Structures for your warehouse."),(0,r.kt)("table",null,(0,r.kt)("tbody",null,(0,r.kt)("tr",null,(0,r.kt)("td",null),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("strong",null,"Redshift")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("strong",null,"Snowflake, BigQuery & Databricks"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("strong",null,"Add / remove / rename an optional field")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-black-color"},"Non-breaking")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},"Non-breaking")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("strong",null,(0,r.kt)("strong",null,"Add / remove / rename")," a required field")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-vivid-red-color"},"Breaking")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-vivid-red-color"},"Breaking"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("strong",null,"Change a field from optional to required")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-vivid-red-color"},"Breaking")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-vivid-red-color"},"Breaking"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("strong",null,"Change a field from required to optional")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-vivid-red-color"},"Breaking")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},"Non-breaking")),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("strong",null,"Change the type of an existing field")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-vivid-red-color"},"Breaking")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-vivid-red-color"},"Breaking"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("strong",null,"Change the size of an existing field")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},(0,r.kt)("span",{class:"has-inline-color has-vivid-red-color"}),(0,r.kt)("span",{class:"has-inline-color has-black-color"},"Non-breaking")),(0,r.kt)("td",{class:"has-text-align-center","data-align":"center"},"Non-breaking")))),(0,r.kt)("h3",{id:"overwriting-schemas"},"Overwriting schemas"),(0,r.kt)("p",null,"Wherever possible we would advise always versioning the schema when making a change. However in cases where this isn't possible, Snowplow does allow you to overwrite a schema on your development environment, that is making a change and keeping the version the same."),(0,r.kt)("p",null,"Overwriting in your Production environment is forbidden due to the technology that auto-adjusts your tables, so when you promote an overwritten version to the Production environment you are required to increase the version as Breaking or Non-Breaking."),(0,r.kt)("h3",{id:"incrementing-the-middle-digit"},"Incrementing the middle digit"),(0,r.kt)("p",null,"For particular workflows you may want to make use of the middle digital as part of your versioning strategy. For simplicity, the UI allows only breaking or non-breaking changes."),(0,r.kt)("p",null,"Should you wish to use the middle versioning digit this is possible ",(0,r.kt)("a",{parentName:"p",href:"/docs/understanding-tracking-design/managing-data-structures-via-the-api-2/"},"via the Data Structures API"),"."))}u.isMDXComponent=!0}}]);