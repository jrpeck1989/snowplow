<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-collecting-data/collecting-from-own-applications/ruby-tracker/adding-data-events/index">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="Snowplow Documentation" href="/opensearch.xml"><title data-rh="true">Adding data to your events: context and more | Snowplow Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.snowplow.io/docs/collecting-data/collecting-from-own-applications/ruby-tracker/adding-data-events/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Adding data to your events: context and more | Snowplow Documentation"><meta data-rh="true" name="description" content="There are multiple ways to add extra data to your tracked events, adding richness and value to your dataset. Each of them involves a different class from the Ruby tracker."><meta data-rh="true" property="og:description" content="There are multiple ways to add extra data to your tracked events, adding richness and value to your dataset. Each of them involves a different class from the Ruby tracker."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.snowplow.io/docs/collecting-data/collecting-from-own-applications/ruby-tracker/adding-data-events/"><link data-rh="true" rel="alternate" href="https://docs.snowplow.io/docs/collecting-data/collecting-from-own-applications/ruby-tracker/adding-data-events/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.snowplow.io/docs/collecting-data/collecting-from-own-applications/ruby-tracker/adding-data-events/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9HS3C2MKTH-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.c14a5ea9.css">
<link rel="preload" href="/assets/js/runtime~main.a25030c0.js" as="script">
<link rel="preload" href="/assets/js/main.cac1a3dd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="announcementBarContent_xLdY">👓 Participate in research that will shape the future of Snowplow Open Source! <a target="_blank" rel="noopener noreferrer" href="https://docs.google.com/forms/d/e/1FAIpQLSeZ1WIQO50N5bb6nIVb6CqIolkCrunimkQtMLpSU31wNKC6GQ/viewform">Apply here.</a></div><button type="button" class="clean-btn close announcementBarClose_gvF7" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link nav-link__first customized_AOMy navbar__link--active" href="/docs/">Docs</a><a href="https://discourse.snowplow.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/snowplow/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://try.snowplowanalytics.com/?utm_content=hero-cta&amp;utm_campaign=snowplow-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Try Snowplow</a><a href="https://go.snowplowanalytics.com/l/571483/2021-02-19/3sn5nml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Book a demo</a><div class="toggle_vylO extraSpace_k8HL"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s extraPadding_YQbj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-with-snowplow-bdp/">Getting started on Snowplow BDP</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow BDP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-on-snowplow-open-source/">Getting started on Snowplow Open Source</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow Open Source&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/try-snowplow/">Try Snowplow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Try Snowplow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/open-source-quick-start/">Snowplow Open Source Quick Start</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Open Source Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-your-pipeline/">Understanding your pipeline</a><button aria-label="Toggle the collapsible sidebar category &#x27;Understanding your pipeline&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-tracking-design/">Designing tracking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Designing tracking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/collecting-data/">Collecting data with Trackers and Webhooks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Collecting data with Trackers and Webhooks&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/">Trackers - collecting data from your own applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Trackers - collecting data from your own applications&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/snowplow-tracker-protocol/">Snowplow Tracker Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/tracker-maintenance-classification/">Tracker Maintenance Classification</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/javascript-trackers/">JavaScript Trackers (Web and Node.js)</a><button aria-label="Toggle the collapsible sidebar category &#x27;JavaScript Trackers (Web and Node.js)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/mobile-trackers/">Mobile Native Trackers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Mobile Native Trackers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/react-native-tracker/">React Native Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;React Native Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/flutter-tracker/">Flutter Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flutter Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/roku-tracker/">Roku Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Roku Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/">Google AMP Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Google AMP Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/pixel-tracker/">Pixel Tracker</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/golang-tracker/">Golang Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Golang Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/net-tracker/">.NET Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;.NET Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/java-tracker/">Java Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Java Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/python-tracker/">Python Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Python Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/scala-tracker/">Scala Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scala Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/">Ruby Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ruby Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/getting-started/">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/tracking-events/">Tracking events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/adding-data-events/">Adding data to your events: context and more</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/configuring-how-events-are-sent/">Configuring how events are sent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a href="https://docs.snowplow.io/snowplow-ruby-tracker/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">API reference<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a href="https://github.com/snowplow-incubator/snowplow-ruby-tracker-examples" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Example Rails application<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/php-tracker/">PHP Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;PHP Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/c-tracker/">C++ Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;C++ Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/unity-tracker/">Unity Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/snowplow-tracking-cli/">Tracking CLI</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tracking CLI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/lua-tracker/">Lua Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lua Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/google-analytics-plugin/">Google Analytics Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/arduino-tracker/">Arduino Tracker</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/actionscript3-tracker/">ActionScript3 Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;ActionScript3 Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-data-from-third-parties/">Webhooks - collecting data from third parties</a><button aria-label="Toggle the collapsible sidebar category &#x27;Webhooks - collecting data from third parties&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/enriching-your-data/">Enriching your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enriching your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/modeling-your-data/">Modeling your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Modeling your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/forwarding-events-to-destinations/">Forwarding events to Destinations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Forwarding events to Destinations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/managing-data-quality/">Managing data quality</a><button aria-label="Toggle the collapsible sidebar category &#x27;Managing data quality&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/using-the-snowplow-console/">Snowplow Console</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Console&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pipeline-components-and-applications/">Pipeline Components and Applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipeline Components and Applications&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/contributing/">Community &amp; contributing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community &amp; contributing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials/">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/collecting-data/"><span itemprop="name">Collecting data with Trackers and Webhooks</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/collecting-data/collecting-from-own-applications/"><span itemprop="name">Trackers - collecting data from your own applications</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/"><span itemprop="name">Ruby Tracker</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Adding data to your events: context and more</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Adding data to your events: context and more</h1></header><p>There are multiple ways to add extra data to your tracked events, adding richness and value to your dataset. Each of them involves a different class from the Ruby tracker.</p><ol><li><a href="#event-context">Event context</a> using SelfDescribingJson. Attach event context, describing anything you like, in the form of self-describing JSONs.</li><li><a href="#adding-user-and-platform-data-with-subject">Subject</a>: Include information about the user, or the platform on which the event occurred.</li><li><a href="#adding-page-data-with-page">Page</a>: For websites, include data about the page on which the event occurred.</li><li><a href="#event-timestamps">Timestamp</a>: Override the default event timestamp with your own timestamp.</li></ol><p>You can attach any of these as additional arguments to the <code>track_x_event</code> methods.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-context">Event context<a class="hash-link" href="#event-context" title="Direct link to heading">​</a></h2><p>Event context is an incredibly powerful aspect of Snowplow tracking, which allows you to create very rich data. It is based on the same <a href="/docs/understanding-tracking-design/understanding-schemas-and-validation/">self-describing JSON schemas</a> as the <a href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/tracking-events/#self-describing-event">self-describing events</a>. Using event context, you can add any details you like to your events, as long as you can describe them in a self-describing JSON schema.</p><p>Each schema will describe a single &quot;entity&quot;. All of an event&#x27;s entities together form the event context. The event context will be sent as one field of the event, finally ending up in one column (<code>contexts</code>) in your data storage. There is no limit to how many entities can be attached to one event.</p><p>The context entities were originally called &quot;context&quot; themselves, with the event context referred to as &quot;contexts&quot;. This was confusing (and not great English grammar), so we changed the name. However, the name &quot;contexts&quot; persists in some places.</p><p>Check out our <a href="https://github.com/snowplow-incubator/snowplow-ruby-tracker-examples" target="_blank" rel="noopener noreferrer">demo Rails app</a> to see an example of a custom eCommerce event created using a self-describing event plus product entity. Note that context can be added to any event type, not just self-describing events. This means that even a simple event type like a page view can hold complex and extensive information - reducing the chances of data loss and the amount of modelling (JOINs etc.) needed in modelling, while increasing the value of each event, and the sophistication of the possible use cases.</p><p>The entities you provide are validated against their schemas as the event is processed (during the enrich phase). If there is a mistake or mismatch, the event is processed as a Bad Event.</p><p>Once defined, an entity can be attached to any kind of event. This is also an important point; it means your tracking is as <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank" rel="noopener noreferrer">DRY</a> as possible. Using the same &quot;user&quot; or &quot;image&quot; or &quot;search result&quot; (etc.) entities throughout your tracking reduces error, and again makes the data easier to model.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Tracking a screen view with context made up of two entities</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">entity1 = SnowplowTracker::SelfDescribingJson.new(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &#x27;iglu:com.my_company/movie_poster/jsonschema/1-0-0&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  { &#x27;movie_name&#x27; =&gt; &#x27;Solaris&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;poster_country&#x27; =&gt; &#x27;JP&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;poster_year$dt&#x27; =&gt; Date.new(1978, 1, 1) }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">entity2 = SnowplowTracker::SelfDescribingJson.new(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &#x27;iglu:com.my_company/customer/jsonschema/1-0-0&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  { &#x27;p_buy&#x27; =&gt; 0.23,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;segment&#x27; =&gt; &#x27;young adult&#x27; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.track_screen_view(id: &#x27;sci-123-abc&#x27;, context: [entity1, entity2])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="#accordion-using-ruby-tracker-andlt070-expand-this">Using Ruby tracker &lt;0.7.0? Expand this</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Tracking a screen view with context made up of two entities</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">entity1 = SnowplowTracker::SelfDescribingJson.new(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &#x27;iglu:com.my_company/movie_poster/jsonschema/1-0-0&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  { &#x27;movie_name&#x27; =&gt; &#x27;Solaris&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;poster_country&#x27; =&gt; &#x27;JP&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;poster_year$dt&#x27; =&gt; Date.new(1978, 1, 1) }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">entity2 = SnowplowTracker::SelfDescribingJson.new(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &#x27;iglu:com.my_company/customer/jsonschema/1-0-0&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  { &#x27;p_buy&#x27; =&gt; 0.23,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &#x27;segment&#x27; =&gt; &#x27;young adult&#x27; }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.track_screen_view(nil, &#x27;sci-123-abc&#x27;, [entity1, entity2])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: the event context is always an array, even if you are only adding one entity.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-user-and-platform-data-with-subject">Adding user and platform data with Subject<a class="hash-link" href="#adding-user-and-platform-data-with-subject" title="Direct link to heading">​</a></h2><p>Subject objects store information about the user associated with the event, such as their <code>user_id</code>, what type of device they used, or what size screen that device had. Also, they store which platform the event occurred on - e.g. server-side app, mobile, games console, etc.</p><p>Each Tracker is initialized with a Subject. This means that every event by default has the platform <code>srv</code>: server-side app. Platform is the only preset Subject parameter, which can be overriden using the <code>set_platform</code> method. All other parameters must be set manually. This can be done directly on the Subject, or, if it is associated with a Tracker, via the Tracker, which has access to all the methods of its Subject.</p><p>Your server-side code may not have access to all these parameters, or they might not be useful to you. All the Subject parameters are optional, except <code>platform</code>.</p><p>You could create and define a new Subject for every user or every event you want to track. Attaching that Subject to the <code>track_x_event</code> method call would add those properties to your event. Alternatively, you could swap the tracker-associated Subject for a more appropriate one before tracking the event, using <code>set_subject</code>.</p><p>The following table lists all the properties that can be set via Subject. These are all part of the <a href="/docs/collecting-data/collecting-from-own-applications/snowplow-tracker-protocol/">Snowplow Tracker Protocol</a>. Check out the <a href="https://snowplow.github.io/snowplow-ruby-tracker/SnowplowTracker/Subject.html" target="_blank" rel="noopener noreferrer">API docs</a> for the details of how to set these parameters.</p><table><thead><tr><th>Property</th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>platform</code></td><td>The platform the app runs on</td></tr><tr><td><code>user_id</code></td><td>Unique identifier for user</td></tr><tr><td><code>domain_userid</code></td><td>Cookie-based unique identifier for user</td></tr><tr><td><code>network_userid</code></td><td>Cookie-based unique identifier for user</td></tr><tr><td><code>domain_sessionid</code></td><td>Cookie-based unique identifier for a visit/session of a <code>user_id</code></td></tr><tr><td><code>domain_sessionidx</code></td><td>Cookie-based count of separate visits/sessions from a <code>user_id</code></td></tr><tr><td><code>user_fingerprint</code></td><td>User identifier based on (hopefully unique) browser features</td></tr><tr><td><code>user_ipaddress</code></td><td>User&#x27;s IP address</td></tr><tr><td><code>useragent</code></td><td>User agent or browser string</td></tr><tr><td><code>br_lang</code></td><td>The device/browser language</td></tr><tr><td><code>os_timezone</code></td><td>The device OS&#x27;s timezone</td></tr><tr><td><code>dvce_screenheight</code> and <code>dvce_screenwidth</code></td><td>The device screen resolution</td></tr><tr><td><code>br_viewwidth</code> and <code>br_viewheight</code></td><td>The browser viewport size</td></tr><tr><td><code>br_colordepth</code></td><td>The browser color depth</td></tr></tbody></table><p>Note: the methods for defining <code>domain_sessionid</code> and <code>domain_sessionidx</code> were added in tracker version 0.7.0.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Creating a Subject and adding user data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subject = SnowplowTracker::Subject.new</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subject.set_user_id(&#x27;12345&#x27;).set_timezone(&#x27;Europe/London&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Different ways to add Subject properties to an event</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 1. Providing the Subject as an argument</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.track_page_view(page_url: &#x27;www.example.com&#x27;, subject: subject)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 2. Swapping the tracker-associated Subject for the new one</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># This will affect all subsequent events tracked</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.set_subject(subject).track_page_view(page_url: &#x27;www.example.com&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 3. Setting the user data directly on the tracker-associated Subject</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># This will affect all subsequent events tracked</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.set_user_id(&#x27;12345&#x27;).set_timezone(&#x27;Europe/London&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.track_page_view(page_url: &#x27;www.example.com&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="#accordion-using-ruby-tracker-andlt070-expand-this">Using Ruby tracker &lt;0.7.0? Expand this</a></p><p>Note: the ability to add Subjects to <code>track_x_event</code> method calls was added in version 0.7.0.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Creating a Subject and adding user data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subject = SnowplowTracker::Subject.new</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subject.set_user_id(&#x27;12345&#x27;).set_timezone(&#x27;Europe/London&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Different ways to add Subject properties to an event</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Either way will affect all subsequent events tracked</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 1. Swapping the tracker-associated Subject for the new one</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.set_subject(subject).track_page_view(&#x27;www.example.com&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 2. Setting the user data directly on the tracker-associated Subject</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.set_user_id(&#x27;12345&#x27;).set_timezone(&#x27;Europe/London&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.track_page_view(&#x27;www.example.com&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cookie-based-user-properties">Cookie-based user properties<a class="hash-link" href="#cookie-based-user-properties" title="Direct link to heading">​</a></h3><p>Several of the user properties listed in the above table are relevant only to web apps, and are intended to derive from cookies. The Snowplow cookies are explained on <a href="/docs/collecting-data/collecting-from-own-applications/javascript-trackers/javascript-tracker/cookies-local-storage/">this page</a>. The client-side Snowplow JavaScript tracker sets first-party cookies, and the event collector sets a third-party cookie. As a server-side tracker, the Ruby tracker doesn&#x27;t automatically have access to cookies. However, these properties can be extremely useful, e.g. in stitching events together from individual users, or for matching server-side events with client-side events.</p><p>Read more about sharing data between client-side and server-side trackers in this <a href="https://snowplowanalytics.com/blog/2021/11/09/the-unrivaled-power-of-joining-client-and-server-side-tracking/" target="_blank" rel="noopener noreferrer">blog post</a>.</p><p>If you have implemented the Ruby tracker as well as the JavaScript tracker in your web app, you could extract the values from the cookies, and set them in your Ruby events using these Subject methods. An example of this is included for <code>domain_user_id</code> in our <a href="https://github.com/snowplow-incubator/snowplow-ruby-tracker-examples" target="_blank" rel="noopener noreferrer">demo Rails app</a>.</p><p>Extracting the <code>domain_user_id</code> from the <code>_sp_id</code> cookie in Rails:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">def snowplow_domain_userid</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  sp_cookie = cookies.find { |key, _value| key =~ /^_sp_id/ }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  sp_cookie.last.split(&quot;.&quot;).first if sp_cookie.present?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Similarly, the <code>domain_session_id</code> and <code>domain_session_idx</code> values are saved in the first-party <code>_sp_ses</code> and <code>_sp_id</code> cookies. If you configured the JavaScript tracker with a different “cookieName” option, then these cookies will be named differently.</p><p>The <code>network_user_id</code> derives from the event collector&#x27;s third-party cookie, hence the name &quot;network&quot; as it is set at a network level. It is the server-side user identifier. The cookie is named <code>sp</code> (Snowplow Micro pipelines call it <code>micro</code> instead). The default behaviour is for the collector to provide a new cookie/network user ID for each event it receives. You can override the collector cookie&#x27;s value with your own generated ID using the <code>set_network_user_id</code> method.</p><p>The user fingerprint is also a client-side concept. The JavaScript Tracker generates a fingerprint based on browser features and attaches it to all client-side events. You could develop your own fingerprints to attach to your Ruby server-side events with <code>set_fingerprint</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-page-data-with-page">Adding page data with Page<a class="hash-link" href="#adding-page-data-with-page" title="Direct link to heading">​</a></h2><p>If the Ruby tracker is incorporated into a website server, the events tracked will describe user activity on specific webpages. Knowing on which page an event occurred can be very valuable.</p><p>Add page URL, page title and referrer URL to any event by adding a Page object to any <code>track_x_event</code> method call. These parameters, of course, form the basis of the page view event. By directly adding page details to your other event types, you can avoid needing to JOIN onto your page view events to find out where they occurred.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Adding Page data to a struct event</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">page = SnowplowTracker::Page.new(page_url: &#x27;http://www.example.com/register&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tracker.track_struct_event(category: &#x27;forms&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                           action: &#x27;start-input&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                           page: page)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Page class was added in tracker version 0.7.0.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-timestamps">Event timestamps<a class="hash-link" href="#event-timestamps" title="Direct link to heading">​</a></h2><p>Processed Snowplow events have five different timestamps. They can have either <code>dvce_created_tstamp</code> or <code>true_tstamp</code>.</p><table><thead><tr><th><strong>Timestamp name</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>dvce_created_tstamp</code></td><td>Added during event creation</td></tr><tr><td><code>true_tstamp</code></td><td>This can be manually set as an alternative to <code>dvce_created_tstamp</code></td></tr><tr><td><code>dvce_sent_tstamp</code></td><td>Added by the Emitter on event sending</td></tr><tr><td><code>collector_tstamp</code></td><td>Added by the event collector</td></tr><tr><td><code>etl_tstamp</code></td><td>Added after event enrichment during the processing pipeline</td></tr><tr><td><code>derived_tstamp</code></td><td>Either a calculated value (<code>collector_tstamp - (dvce_sent_tstamp - dvce_created_tstamp)</code>) or the same as <code>true_tstamp</code></td></tr></tbody></table><p>Overriding the default event timestamp (<code>dvce_created_tstamp</code>) can be useful in some situations. For example, if the Snowplow event refers to an action that happened previously but is only now being tracked. This can be achieved using the Ruby tracker classes DeviceTimestamp and TrueTimestamp (see <a href="https://snowplow.github.io/snowplow-ruby-tracker/SnowplowTracker/Timestamp.html" target="_blank" rel="noopener noreferrer">API docs</a>).</p><p>This <a href="https://discourse.snowplow.io/t/which-timestamp-is-the-best-to-see-when-an-event-occurred/538" target="_blank" rel="noopener noreferrer">Discourse forums post</a> explains why you may wish to use <code>derived_tstamp</code> as the main event timestamp rather than <code>dvce_created_tstamp</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/snowplow/snowplow.github.io/tree/main/docs/collecting-data/collecting-from-own-applications/ruby-tracker/adding-data-events/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-09T12:18:35.000Z">Sep 9, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/tracking-events/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tracking events</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker/configuring-how-events-are-sent/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuring how events are sent</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#event-context" class="table-of-contents__link toc-highlight">Event context</a></li><li><a href="#adding-user-and-platform-data-with-subject" class="table-of-contents__link toc-highlight">Adding user and platform data with Subject</a><ul><li><a href="#cookie-based-user-properties" class="table-of-contents__link toc-highlight">Cookie-based user properties</a></li></ul></li><li><a href="#adding-page-data-with-page" class="table-of-contents__link toc-highlight">Adding page data with Page</a></li><li><a href="#event-timestamps" class="table-of-contents__link toc-highlight">Event timestamps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/cookie-preferences/">Change cookie preferences</a><span class="footer__link-separator">·</span><a class="footer__link-item" href="/terms-and-conditions/">Terms and conditions</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Snowplow Analytics Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a25030c0.js"></script>
<script src="/assets/js/main.cac1a3dd.js"></script>
</body>
</html>